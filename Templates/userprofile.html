<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile | StressSense AI</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f5f6fa; margin: 0; }
        .wrapper { display: flex; min-height: 100vh; }
        .sidebar { width: 250px; background: #2c3e50; color: white; padding-top: 20px; }
        .sidebar a { color: white; text-decoration: none; display: block; padding: 15px; }
        .sidebar a:hover { background: #34495e; }
        .sidebar .active { background: #1abc9c; }
        .content { flex-grow: 1; padding: 30px; background: #f5f6fa; overflow-y: auto; }
        .card { border-radius: 12px; }
    </style>
</head>
<body>

<div class="wrapper">
    <!-- Sidebar -->
    <div class="sidebar">
        <h3 class="text-center">StressSense AI</h3>
        <hr>
        <a href="{{ url_for('user.dashboard') }}"><i class="bi bi-house-fill me-2"></i> Dashboard</a>
        <a href="{{ url_for('user.profile') }}" class="active"><i class="bi bi-person-fill me-2"></i> Profile</a>
        <a href="{{ url_for('user.assessments') }}"><i class="bi bi-bar-chart-fill me-2"></i> Assessments</a>
        <a href="{{ url_for('user.suggestions') }}"><i class="bi bi-lightbulb-fill me-2"></i> Suggestions</a>
        <a href="{{ url_for('user.logout') }}"><i class="bi bi-box-arrow-right me-2"></i> Logout</a>
    </div>

    <!-- Main Content -->
    <div class="content">
        <div class="card shadow-lg p-4">
            <h3 class="mb-4">User Profile</h3>

            <!-- Profile View Mode -->
            {% if not request.args.get('edit') %}
                <p><strong>Name:</strong> {{ user.name }}</p>
                <p><strong>Email:</strong> {{ user.email }}</p>
                <p><strong>Role:</strong> {{ user.role }}</p>
                <p><strong>Bio:</strong> {{ user.bio }}</p>
                <a href="{{ url_for('user.profile', edit='true') }}" class="btn btn-primary mt-3">
                    <i class="bi bi-pencil-square"></i> Edit Profile
                </a>
            {% endif %}

            <!-- Profile Edit Mode -->
            {% if request.args.get('edit') %}
                <form action="{{ url_for('user.update_profile') }}" method="post">
                    <div class="mb-3">
                        <label class="form-label">Name</label>
                        <input type="text" class="form-control" name="name" value="{{ user.name }}">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" name="email" value="{{ user.email }}">
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Role</label>
                        <select class="form-select" name="role">
                            <option {% if user.role == 'User' %}selected{% endif %}>User</option>
                            <option {% if user.role == 'Expert' %}selected{% endif %}>Expert</option>
                            <option {% if user.role == 'Admin' %}selected{% endif %}>Admin</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Bio</label>
                        <textarea class="form-control" name="bio" rows="3">{{ user.bio }}</textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Password</label>
                        <input type="password" class="form-control" name="password">
                    </div>
                    <button type="submit" class="btn btn-success"><i class="bi bi-check-circle"></i> Save</button>
                    <a href="{{ url_for('user.profile') }}" class="btn btn-secondary"><i class="bi bi-x-circle"></i> Cancel</a>
                </form>
            {% endif %}
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="bg-dark text-white text-center py-3 mt-4">
    <p>&copy; 2025 StressSense AI. All rights reserved.</p>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>


